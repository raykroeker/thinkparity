
################################################################################
## Inital Schema Creation
################################################################################
CreateArtifactState:create table ARTIFACT_STATE (\
	ARTIFACT_STATE_ID smallint not null,\
	ARTIFACT_STATE varchar(12) not null,\
	primary key(ARTIFACT_STATE_ID),\
	unique (ARTIFACT_STATE)\
)
CreateArtifactType:create table ARTIFACT_TYPE (\
	ARTIFACT_TYPE_ID smallint not null,\
	ARTIFACT_TYPE varchar(12) not null,\
	primary key(ARTIFACT_TYPE_ID),\
	unique (ARTIFACT_TYPE)\
)
CreateArtifactFlag:create table ARTIFACT_FLAG (\
	ARTIFACT_FLAG_ID smallint not null,\
	ARTIFACT_FLAG varchar(12) not null,\
	primary key(ARTIFACT_FLAG_ID),\
	unique (ARTIFACT_FLAG)\
)
CreateArtifact:create table ARTIFACT(\
	ARTIFACT_ID bigint generated by default as identity (start with 1),\
	ARTIFACT_NAME varchar(255) not null,\
	ARTIFACT_STATE_ID smallint not null,\
	ARTIFACT_TYPE_ID smallint not null,\
	ARTIFACT_UNIQUE_ID varchar(255) not null,\
	CREATED_BY varchar(255) not null,\
	CREATED_ON timestamp not null,\
	UPDATED_BY varchar(255) not null,\
	UPDATED_ON timestamp not null,\
	primary key (ARTIFACT_ID),\
	unique (ARTIFACT_UNIQUE_ID),\
	foreign key (ARTIFACT_STATE_ID) references ARTIFACT_STATE (ARTIFACT_STATE_ID),\
	foreign key (ARTIFACT_TYPE_ID) references ARTIFACT_TYPE (ARTIFACT_TYPE_ID)\
)
CreateArtifactFlagRel:create table ARTIFACT_FLAG_REL (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_FLAG_ID smallint not null,\
	primary key (ARTIFACT_ID, ARTIFACT_FLAG_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT (ARTIFACT_ID),\
	foreign key (ARTIFACT_FLAG_ID) references ARTIFACT_FLAG (ARTIFACT_FLAG_ID)\
)
CreateArtifactVersion:create table ARTIFACT_VERSION (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	ARTIFACT_NAME varchar(255) not null,\
	ARTIFACT_TYPE varchar(12) not null,\
	ARTIFACT_UNIQUE_ID varchar(255) not null,\
	CREATED_BY varchar(255) not null,\
	CREATED_ON timestamp not null,\
	UPDATED_BY varchar(255) not null,\
	UPDATED_ON timestamp not null,\
	primary key (ARTIFACT_ID, ARTIFACT_VERSION_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT (ARTIFACT_ID),\
	foreign key (ARTIFACT_UNIQUE_ID) references ARTIFACT (ARTIFACT_UNIQUE_ID)\
)
CreateArtifactVersionMetaData:create table ARTIFACT_VERSION_META_DATA (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	KEY varchar(255) not null,\
	VALUE varchar(255) not null,\
	primary key (ARTIFACT_ID,ARTIFACT_VERSION_ID,KEY),\
	foreign key (ARTIFACT_ID,ARTIFACT_VERSION_ID) references ARTIFACT_VERSION(ARTIFACT_ID,ARTIFACT_VERSION_ID)\
)
CreateDocument:create table DOCUMENT (\
	ARTIFACT_ID bigint not null,\
	CONTENT longvarbinary not null,\
	CONTENT_ENCODING varchar(255) not null,\
	CONTENT_CHECKSUM varchar(255) not null,\
	CONTENT_COMPRESSION smallint not null,\
	primary key (ARTIFACT_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT (ARTIFACT_ID)\
)
CreateDocumentVersion:create table DOCUMENT_VERSION (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	CONTENT longvarbinary not null,\
	CONTENT_ENCODING varchar(255) not null,\
	CONTENT_CHECKSUM varchar(255) not null,\
	CONTENT_COMPRESSION smallint not null,\
	primary key (ARTIFACT_ID, ARTIFACT_VERSION_ID),\
	foreign key (ARTIFACT_ID, ARTIFACT_VERSION_ID) references ARTIFACT_VERSION (ARTIFACT_ID, ARTIFACT_VERSION_ID)\
)
CreateMetaData:create table META_DATA (\
	KEY varchar(255) not null,\
	VALUE varchar(255) not null,\
	primary key (KEY)\
)
################################################################################

################################################################################
## Seed Data
################################################################################
InsertSeedArtifactState:insert into \
	ARTIFACT_STATE (ARTIFACT_STATE_ID,ARTIFACT_STATE)\
	values (?,?)
InsertSeedArtifactType:insert into \
	ARTIFACT_TYPE (ARTIFACT_TYPE_ID,ARTIFACT_TYPE)\
	values (?,?)
InsertSeedArtifactFlag:insert into \
	ARTIFACT_FLAG (ARTIFACT_FLAG_ID,ARTIFACT_FLAG)\
	values (?,?)
################################################################################