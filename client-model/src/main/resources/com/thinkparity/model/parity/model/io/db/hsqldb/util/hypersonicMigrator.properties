
################################################################################
## Inital Schema Creation
################################################################################
CreateMetaDataType:create table META_DATA_TYPE (\
	META_DATA_TYPE_ID smallint not null,\
	META_DATA_TYPE varchar(12) not null,\
	primary key (META_DATA_TYPE_ID),\
	unique (META_DATA_TYPE)\
)
CreateMetaData:create table META_DATA (\
	META_DATA_ID bigint generated by default as identity (start with 1000),\
	META_DATA_TYPE_ID smallint not null,\
	KEY varchar(64) not null,\
	VALUE varchar(255) not null,\
	primary key (META_DATA_ID),\
	foreign key (META_DATA_TYPE_ID) references META_DATA_TYPE(META_DATA_TYPE_ID)\
)
CreateArtifactState:create table ARTIFACT_STATE (\
	ARTIFACT_STATE_ID smallint not null,\
	ARTIFACT_STATE varchar(12) not null,\
	primary key(ARTIFACT_STATE_ID),\
	unique (ARTIFACT_STATE)\
)
CreateArtifactType:create table ARTIFACT_TYPE (\
	ARTIFACT_TYPE_ID smallint not null,\
	ARTIFACT_TYPE varchar(12) not null,\
	primary key(ARTIFACT_TYPE_ID),\
	unique (ARTIFACT_TYPE)\
)
CreateArtifactFlag:create table ARTIFACT_FLAG (\
	ARTIFACT_FLAG_ID smallint not null,\
	ARTIFACT_FLAG varchar(12) not null,\
	primary key(ARTIFACT_FLAG_ID),\
	unique (ARTIFACT_FLAG)\
)
CreateArtifact:create table ARTIFACT(\
	ARTIFACT_ID bigint generated by default as identity (start with 2000),\
	ARTIFACT_NAME varchar(255) not null,\
	ARTIFACT_STATE_ID smallint not null,\
	ARTIFACT_TYPE_ID smallint not null,\
	ARTIFACT_UNIQUE_ID varchar(255) not null,\
	CREATED_BY varchar(32) not null,\
	CREATED_ON timestamp not null,\
	UPDATED_BY varchar(32) not null,\
	UPDATED_ON timestamp not null,\
	primary key (ARTIFACT_ID),\
	unique (ARTIFACT_UNIQUE_ID),\
	foreign key (ARTIFACT_STATE_ID) references ARTIFACT_STATE (ARTIFACT_STATE_ID),\
	foreign key (ARTIFACT_TYPE_ID) references ARTIFACT_TYPE (ARTIFACT_TYPE_ID)\
)
CreateArtifactFlagRel:create table ARTIFACT_FLAG_REL (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_FLAG_ID smallint not null,\
	primary key (ARTIFACT_ID, ARTIFACT_FLAG_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT (ARTIFACT_ID),\
	foreign key (ARTIFACT_FLAG_ID) references ARTIFACT_FLAG (ARTIFACT_FLAG_ID)\
)
CreateArtifactVersion:create table ARTIFACT_VERSION (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	ARTIFACT_NAME varchar(255) not null,\
	ARTIFACT_TYPE varchar(12) not null,\
	ARTIFACT_UNIQUE_ID varchar(255) not null,\
	CREATED_BY varchar(32) not null,\
	CREATED_ON timestamp not null,\
	UPDATED_BY varchar(32) not null,\
	UPDATED_ON timestamp not null,\
	primary key (ARTIFACT_ID, ARTIFACT_VERSION_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT (ARTIFACT_ID),\
	foreign key (ARTIFACT_UNIQUE_ID) references ARTIFACT (ARTIFACT_UNIQUE_ID)\
)
CreateArtifactVersionMetaData:create table ARTIFACT_VERSION_META_DATA (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	ARTIFACT_VERSION_META_DATA_TYPE_ID smallint not null,\
	KEY varchar(64) not null,\
	VALUE varchar(255) not null,\
	primary key (ARTIFACT_ID,ARTIFACT_VERSION_ID,KEY),\
	foreign key (ARTIFACT_ID,ARTIFACT_VERSION_ID) references ARTIFACT_VERSION(ARTIFACT_ID,ARTIFACT_VERSION_ID),\
	foreign key (ARTIFACT_VERSION_META_DATA_TYPE_ID) references META_DATA_TYPE(META_DATA_TYPE_ID)\
)
CreateArtifactAuditType:create table ARTIFACT_AUDIT_TYPE (\
	ARTIFACT_AUDIT_TYPE_ID smallint not null,\
	ARTIFACT_AUDIT_TYPE varchar(12) not null,\
	primary key (ARTIFACT_AUDIT_TYPE_ID),\
	unique (ARTIFACT_AUDIT_TYPE)\
)
CreateArtifactAudit:create table ARTIFACT_AUDIT (\
	ARTIFACT_AUDIT_ID bigint generated by default as identity (start with 3000),\
	ARTIFACT_AUDIT_TYPE_ID smallint not null,\
	ARTIFACT_ID bigint not null,\
	CREATED_ON timestamp not null,\
	CREATED_BY varchar(32) not null,\
	primary key (ARTIFACT_AUDIT_ID),\
	foreign key (ARTIFACT_AUDIT_TYPE_ID) references ARTIFACT_AUDIT_TYPE(ARTIFACT_AUDIT_TYPE_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT(ARTIFACT_ID)\
)
CreateArtifactAuditMetaData:create table ARTIFACT_AUDIT_META_DATA (\
	ARTIFACT_AUDIT_ID bigint,\
	META_DATA_ID bigint,\
	foreign key (ARTIFACT_AUDIT_ID) references ARTIFACT_AUDIT(ARTIFACT_AUDIT_ID),\
	foreign key (META_DATA_ID) references META_DATA(META_DATA_ID)\
)
CreateArtifactAuditVersion:create table ARTIFACT_AUDIT_VERSION (\
	ARTIFACT_AUDIT_ID bigint not null,\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	primary key (ARTIFACT_AUDIT_ID),\
	foreign key (ARTIFACT_AUDIT_ID) references ARTIFACT_AUDIT(ARTIFACT_AUDIT_ID),\
	foreign key (ARTIFACT_ID,ARTIFACT_VERSION_ID) references ARTIFACT_VERSION(ARTIFACT_ID,ARTIFACT_VERSION_ID)\
)
CreateDocument:create table DOCUMENT (\
	ARTIFACT_ID bigint not null,\
	CONTENT longvarbinary not null,\
	CONTENT_ENCODING varchar(255) not null,\
	CONTENT_CHECKSUM varchar(255) not null,\
	CONTENT_COMPRESSION smallint not null,\
	primary key (ARTIFACT_ID),\
	foreign key (ARTIFACT_ID) references ARTIFACT (ARTIFACT_ID)\
)
CreateDocumentVersion:create table DOCUMENT_VERSION (\
	ARTIFACT_ID bigint not null,\
	ARTIFACT_VERSION_ID bigint not null,\
	CONTENT longvarbinary not null,\
	CONTENT_ENCODING varchar(255) not null,\
	CONTENT_CHECKSUM varchar(255) not null,\
	CONTENT_COMPRESSION smallint not null,\
	primary key (ARTIFACT_ID, ARTIFACT_VERSION_ID),\
	foreign key (ARTIFACT_ID, ARTIFACT_VERSION_ID) references ARTIFACT_VERSION (ARTIFACT_ID, ARTIFACT_VERSION_ID)\
)
################################################################################

################################################################################
## Seed Data
################################################################################
InsertSeedMetaDataType:insert into \
	META_DATA_TYPE (META_DATA_TYPE_ID,META_DATA_TYPE)\
	values (?,?)
InsertSeedMetaData:insert into \
	META_DATA (META_DATA_TYPE_ID,KEY,VALUE)\
	values (?,?,?)
InsertSeedArtifactState:insert into \
	ARTIFACT_STATE (ARTIFACT_STATE_ID,ARTIFACT_STATE)\
	values (?,?)
InsertSeedArtifactType:insert into \
	ARTIFACT_TYPE (ARTIFACT_TYPE_ID,ARTIFACT_TYPE)\
	values (?,?)
InsertSeedArtifactFlag:insert into \
	ARTIFACT_FLAG (ARTIFACT_FLAG_ID,ARTIFACT_FLAG)\
	values (?,?)
InsertSeedArtifactAuditType:insert into \
	ARTIFACT_AUDIT_TYPE (ARTIFACT_AUDIT_TYPE_ID,ARTIFACT_AUDIT_TYPE)\
	values (?,?)
################################################################################