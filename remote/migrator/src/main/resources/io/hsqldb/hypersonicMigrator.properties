
################################################################################
## Inital Schema Creation
################################################################################
CreateMetaDataType:create table META_DATA_TYPE (\
	META_DATA_TYPE_ID smallint not null,\
	META_DATA_TYPE varchar(12) not null,\
	primary key (META_DATA_TYPE_ID),\
	unique (META_DATA_TYPE)\
)
CreateMetaData:create table META_DATA (\
	META_DATA_ID bigint generated by default as identity (start with 1000),\
	META_DATA_TYPE_ID smallint not null,\
	KEY varchar(64) not null,\
	VALUE varchar(255) not null,\
	primary key (META_DATA_ID),\
	foreign key (META_DATA_TYPE_ID) references META_DATA_TYPE(META_DATA_TYPE_ID)\
)
CreateLibraryType:create table LIBRARY_TYPE (\
	LIBRARY_TYPE_ID smallint not null,\
	LIBRARY_TYPE varchar(16) not null,\
	primary key (LIBRARY_TYPE_ID),\
	unique (LIBRARY_TYPE)\
)
CreateLibrary:create table LIBRARY (\
	LIBRARY_ID bigint generated by default as identity (start with 2000),\
	LIBRARY_TYPE_ID smallint not null,\
	LIBRARY_GROUP_ID varchar not null,\
	LIBRARY_ARTIFACT_ID varchar not null,\
	LIBRARY_VERSION varchar not null,\
	primary key (LIBRARY_ID),\
	unique (LIBRARY_TYPE_ID,LIBRARY_GROUP_ID,LIBRARY_ARTIFACT_ID,LIBRARY_VERSION),\
	foreign key (LIBRARY_TYPE_ID) references LIBRARY_TYPE(LIBRARY_TYPE_ID)\
)
CreateLibraryBytes:create table LIBRARY_BYTES (\
    LIBRARY_ID bigint not null,\
	LIBRARY_BYTES longvarbinary not null,\
    primary key (LIBRARY_ID),\
    foreign key (LIBRARY_ID) references LIBRARY(LIBRARY_ID)\
)
CreateRelease:create table RELEASE (\
	RELEASE_ID bigint generated by default as identity (start with 3000),\
	RELEASE_NAME varchar(16) not null,\
	RELEASE_GROUP_ID varchar not null,\
	RELEASE_ARTIFACT_ID varchar not null,\
	RELEASE_VERSION varchar not null,\
	primary key (RELEASE_ID),\
	unique (RELEASE_NAME,RELEASE_GROUP_ID,RELEASE_ARTIFACT_ID),\
	unique (RELEASE_GROUP_ID,RELEASE_ARTIFACT_ID,RELEASE_VERSION)\
)
CreateReleaseLibraryRel:create table RELEASE_LIBRARY_REL(\
	RELEASE_ID bigint not null,\
	LIBRARY_ID bigint not null,\
	primary key (RELEASE_ID,LIBRARY_ID),\
	foreign key (RELEASE_ID) references RELEASE(RELEASE_ID),\
	foreign key (LIBRARY_ID) references LIBRARY(LIBRARY_ID)\
)
################################################################################

################################################################################
## Seed Data
################################################################################
InsertSeedMetaDataType:insert into \
	META_DATA_TYPE (META_DATA_TYPE_ID,META_DATA_TYPE)\
	values (?,?)
InsertSeedVersion:insert into \
	META_DATA (META_DATA_TYPE_ID,KEY,VALUE)\
	values (?,?,?)
InsertSeedLibraryType:insert into \
	LIBRARY_TYPE (LIBRARY_TYPE_ID,LIBRARY_TYPE)\
	values (?,?)
ReadMetaDataVersion:select VALUE \
	from META_DATA \
	where META_DATA_ID=? and META_DATA_TYPE_ID=? and KEY=?
################################################################################
